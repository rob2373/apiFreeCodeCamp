  /******************************************************
 * PLEASE DO NOT EDIT THIS FILE
 * the verification process may break
 * ***************************************************/

'use strict';

const path = require("path");
var fs = require('fs');
var express = require('express');
const { redirect } = require("express/lib/response");
var app = express();

require('dotenv').config({path: path.resolve(__dirname,"./.env")})

app.use('/public', express.static(process.cwd() + '/public'));

app.get("/", (req, res) => {
  var respuesta
  if (process.env.MESSAGE_STYLE=="uppercase"){
      respuesta = "Hello json".toUpperCase();
    
  }else 
  {
    respuesta="Hello json"
  }
  res.json({
    message: respuesta
  })
});

/* app.get('/', (req, res) => {
		  res.sendFile(process.cwd() + '/views/index.html');
    })
 */
// Respond not found to all the wrong routes

//middleware
app.all(function middleware(req, res, next){
  var logger = req.method +" " + req.path + "-" + req.ip ; 
  console.log(logger);
  next();
}
)

// Error Middleware

//Listen on port set in environment variable or default to 3000
const listener = app.listen(process.env.PORT || 3000, function () {
  console.log("Node.js listening on port " + listener.address().port);
});

